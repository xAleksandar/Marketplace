{"ast":null,"code":"'use strict';\n/**\n * @template T\n * @typedef {Object} Peek\n * @property {() => IteratorResult<T, void>} peek\n */\n\n/**\n * @template T\n * @typedef {Object} AsyncPeek\n * @property {() => Promise<IteratorResult<T, void>>} peek\n */\n\n/**\n * @template T\n * @typedef {Object} Push\n * @property {(value:T) => void} push\n */\n\n/**\n * @template T\n * @typedef {Iterable<T> & Peek<T> & Push<T> & Iterator<T>} Peekable<T>\n */\n\n/**\n * @template T\n * @typedef {AsyncIterable<T> & AsyncPeek<T> & Push<T> & AsyncIterator<T>} AsyncPeekable<T>\n */\n\n/**\n * @template {Iterable<any> | AsyncIterable<any>} I\n * @param {I} iterable\n * @returns {I extends Iterable<infer T>\n *  ? Peekable<T>\n *  : I extends AsyncIterable<infer T>\n *  ? AsyncPeekable<T>\n *  : never\n * }\n */\n\nfunction peekableIterator(iterable) {\n  // @ts-ignore\n  const [iterator, symbol] = iterable[Symbol.asyncIterator] // @ts-ignore\n  ? [iterable[Symbol.asyncIterator](), Symbol.asyncIterator] // @ts-ignore\n  : [iterable[Symbol.iterator](), Symbol.iterator];\n  /** @type {any[]} */\n\n  const queue = []; // @ts-ignore\n\n  return {\n    peek: () => {\n      return iterator.next();\n    },\n    push: value => {\n      queue.push(value);\n    },\n    next: () => {\n      if (queue.length) {\n        return {\n          done: false,\n          value: queue.shift()\n        };\n      }\n\n      return iterator.next();\n    },\n\n    [symbol]() {\n      return this;\n    }\n\n  };\n}\n\nmodule.exports = peekableIterator;","map":{"version":3,"sources":["/home/alex/Documents/gitest/Marketplace/node_modules/it-peekable/index.js"],"names":["peekableIterator","iterable","iterator","symbol","Symbol","asyncIterator","queue","peek","next","push","value","length","done","shift","module","exports"],"mappings":"AAAA;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,SAASA,gBAAT,CAA2BC,QAA3B,EAAqC;AACnC;AACA,QAAM,CAACC,QAAD,EAAWC,MAAX,IAAqBF,QAAQ,CAACG,MAAM,CAACC,aAAR,CAAR,CACzB;AADyB,IAEvB,CAACJ,QAAQ,CAACG,MAAM,CAACC,aAAR,CAAR,EAAD,EAAmCD,MAAM,CAACC,aAA1C,CAFuB,CAGzB;AAHyB,IAIvB,CAACJ,QAAQ,CAACG,MAAM,CAACF,QAAR,CAAR,EAAD,EAA8BE,MAAM,CAACF,QAArC,CAJJ;AAMA;;AACA,QAAMI,KAAK,GAAG,EAAd,CATmC,CAWnC;;AACA,SAAO;AACLC,IAAAA,IAAI,EAAE,MAAM;AACV,aAAOL,QAAQ,CAACM,IAAT,EAAP;AACD,KAHI;AAILC,IAAAA,IAAI,EAAGC,KAAD,IAAW;AACfJ,MAAAA,KAAK,CAACG,IAAN,CAAWC,KAAX;AACD,KANI;AAOLF,IAAAA,IAAI,EAAE,MAAM;AACV,UAAIF,KAAK,CAACK,MAAV,EAAkB;AAChB,eAAO;AACLC,UAAAA,IAAI,EAAE,KADD;AAELF,UAAAA,KAAK,EAAEJ,KAAK,CAACO,KAAN;AAFF,SAAP;AAID;;AAED,aAAOX,QAAQ,CAACM,IAAT,EAAP;AACD,KAhBI;;AAiBL,KAACL,MAAD,IAAY;AACV,aAAO,IAAP;AACD;;AAnBI,GAAP;AAqBD;;AAEDW,MAAM,CAACC,OAAP,GAAiBf,gBAAjB","sourcesContent":["'use strict'\n\n/**\n * @template T\n * @typedef {Object} Peek\n * @property {() => IteratorResult<T, void>} peek\n */\n\n/**\n * @template T\n * @typedef {Object} AsyncPeek\n * @property {() => Promise<IteratorResult<T, void>>} peek\n */\n\n/**\n * @template T\n * @typedef {Object} Push\n * @property {(value:T) => void} push\n */\n\n/**\n * @template T\n * @typedef {Iterable<T> & Peek<T> & Push<T> & Iterator<T>} Peekable<T>\n */\n\n/**\n * @template T\n * @typedef {AsyncIterable<T> & AsyncPeek<T> & Push<T> & AsyncIterator<T>} AsyncPeekable<T>\n */\n\n/**\n * @template {Iterable<any> | AsyncIterable<any>} I\n * @param {I} iterable\n * @returns {I extends Iterable<infer T>\n *  ? Peekable<T>\n *  : I extends AsyncIterable<infer T>\n *  ? AsyncPeekable<T>\n *  : never\n * }\n */\nfunction peekableIterator (iterable) {\n  // @ts-ignore\n  const [iterator, symbol] = iterable[Symbol.asyncIterator]\n    // @ts-ignore\n    ? [iterable[Symbol.asyncIterator](), Symbol.asyncIterator]\n    // @ts-ignore\n    : [iterable[Symbol.iterator](), Symbol.iterator]\n\n  /** @type {any[]} */\n  const queue = []\n\n  // @ts-ignore\n  return {\n    peek: () => {\n      return iterator.next()\n    },\n    push: (value) => {\n      queue.push(value)\n    },\n    next: () => {\n      if (queue.length) {\n        return {\n          done: false,\n          value: queue.shift()\n        }\n      }\n\n      return iterator.next()\n    },\n    [symbol] () {\n      return this\n    }\n  }\n}\n\nmodule.exports = peekableIterator\n"]},"metadata":{},"sourceType":"script"}